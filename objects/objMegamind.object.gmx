<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprMegamind</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>30</depth>
  <persistent>0</persistent>
  <parentName>prtBoss</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

healthpointsStart = 96;
healthpoints = healthpointsStart;
blockCollision = 0;
grav = 0;
contactDamage = 4;
phase = 0;
introType = 0;

useEndStageBehavior = false;

bigBrain = 0;
brainBlast = 0;
droneTimer = 0;
smartTimer = 0;

// Music
music = "MM8MiniBoss.ogg";
musicType = "OGG";
musicTrackNumber = 0;
musicVolume = 0.8;
musicLoop = true;
musicLoopSecondsStart = 6.600;
musicLoopSecondsEnd = 44.978;

// Damage Tables
enemyDamageValue(objBusterShotHalfCharged, 1);
enemyDamageValue(objBusterShotCharged, 3);
enemyDamageValue(objYamato, 3);
enemyDamageValue(objKnuckleSandwich, 10);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

if (entityCanStep())
{
    if (startIntro)
    {
        startIntro = false;
        isIntro = true;
        drawBoss = true;
        y = view_yview - 48;
        visible = true;
    }
    else if (isIntro)
    {
        if (y &lt; ystart)
            y+= 4;
        else
        {
            y = ystart;
            smartTimer++;
            if (smartTimer &gt;= 30)
            {
                smartTimer = 0;
                isIntro = false;
            }
        }
    }

    if (isFight)
    {
        var tx = x, ty = y, yeah = view_xview + 128;
        if (instance_exists(target))
        {
            tx = target.x;
            ty = target.y;
        }
        switch (bigBrain)
        {
            case 0: // cool zappies
                smartTimer++;
                if (smartTimer == 15)
                {
                    playSFX(sfxSheepSpark);
                    for (r = 0; r &lt; 12; r++)
                    {
                        if (r &lt; 2 || r &gt; 6)
                        {
                            s = instance_create(x - (16 * image_xscale), 
                            view_yview + 24 + (r * 16), objMegamindBlast);
                            s.image_xscale = image_xscale;
                        }
                    }
                    brainBlast++;
                }
                if (smartTimer &gt;= 116)
                {
                    if (brainBlast &lt; 2)
                        smartTimer = 0;
                    else if (!instance_exists(objMegamindBlast))
                    {
                        bigBrain = 1;
                        brainBlast = 0;
                        smartTimer = 0;
                    }
                }
                break;
            case 1: //drones? kill him
                smartTimer+= (smartTimer &lt;= 104 || smartTimer &gt;= 120)
                if (smartTimer == 12 || smartTimer == 16 || 
                smartTimer == 124 || smartTimer == 128)
                {
                    if (smartTimer == 124)
                    {
                        for (n = -1; n &lt; 2; n+= 2)
                        {
                            dravis = instance_create(yeah - (64 * n),
                            view_yview + 32, objMegamindDrone);
                            with (dravis)
                            {
                                playSFX(sfxHeliButonReveal);
                                for (i = 0; i &lt; 8; i++)
                                    instance_create(x, y, objHeliButonLeaf);
                            }
                        }
                    }
                    canHit = false;
                    canDamage = false;
                    image_index++
                }
                if (smartTimer == 20 || smartTimer == 132)
                {
                    image_index = 3;
                    visible = false;
                    if (smartTimer == 20) playSFX(sfxPortal);
                    if (smartTimer == 132) playSFX(sfxTeleportIn);
                }
                if (smartTimer == 48 || smartTimer == 52 || smartTimer == 56)
                {
                    canHit = true;
                    canDamage = true;
                    visible = true;
                    image_index--;
                    x = yeah + (96 * -image_xscale);
                }
                if ((smartTimer &gt;= 48 &amp;&amp; smartTimer &lt; 88))
                {
                    if (instance_exists(target))
                        y = ty - 24;
                }
                if (smartTimer == 88)
                    image_index = 2;
                if (smartTimer == 104)
                {
                    playSFX(sfxSola0Shoot);
                    y+= 8;
                    image_index = 3;
                    xspeed = 5 * image_xscale;
                }
                if ((xspeed &gt; 0 &amp;&amp; x &gt;= view_xview + view_wview - 24) ||
                (xspeed &lt; 0 &amp;&amp; x &lt;= view_xview + 24))
                {
                    image_index = 0;
                    xspeed = 0;
                    smartTimer = 120;
                }
                if (smartTimer &gt;= 135)
                {
                    if (brainBlast &lt; 2)
                    {
                        brainBlast++;
                        smartTimer = 0;
                        x = yeah + (96 * image_xscale);
                        image_xscale*= -1;
                    }
                    else if (!instance_exists(objMegamindDrone))
                    {
                        bigBrain = 2;
                        brainBlast = 0;
                        smartTimer = 0;
                    }
                }
                break;
            case 2: // come from above and do it over again!!!
                smartTimer++;
                if (smartTimer == 24)
                {
                    canHit = true;
                    canDamage = true;
                    x = yeah + (80 * image_xscale);
                    y = view_yview - 24;
                    visible = true;
                    image_index = 0;
                    image_xscale *= -1;
                }
                if (smartTimer == 24)
                    yspeed = 4;
                if (yspeed &gt; 0 &amp;&amp; y &gt;= ystart)
                {
                    y = ystart;
                    yspeed = 0;
                    smartTimer = 0;
                    bigBrain = 0;
                }
                break;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
with (prtEnemyProjectile)
{
    instance_create(x, y, objExplosion);
    instance_destroy();
}
with (objMegamindDrone)
{
    r = instance_create(x, y, objHarmfulExplosion);
    r.contactDamage = 0;
    instance_destroy();
}
stopMusic();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
